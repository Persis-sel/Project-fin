---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

üî∏ –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è FSM (–±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫):
user_data[user_id] ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≥—Ä—É–ø–ø–∞, —Å—É–º–º–∞, –¥–∞—Ç–∞, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π);
user_states[user_id] ‚Äî —Ñ–ª–∞–≥–∏ (waiting_for_date, active, stage);
–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —á–µ—Ä–µ–∑ /stop –∏–ª–∏ –∫–Ω–æ–ø–∫—É Stop.
üî∏ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
–í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏:
plt.tight_layout();
bbox_inches='tight';
dpi=150‚Äì300;
—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ BytesIO ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞–∫ —Ñ–æ—Ç–æ;
–¢–∞–±–ª–∏—Ü—ã:
plt.table() + —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è (—Ü–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞);
–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –∫–æ–ª–æ–Ω–æ–∫ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü.
üî∏ –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (–¥–æ 15 –ø–æ–ø—ã—Ç–æ–∫, —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞);
‚úÖ –û–±–Ω—É–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫ –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞ –ø—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ;
‚úÖ try/except/finally –¥–ª—è –≤—Å–µ—Ö –ë–î-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π;
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –≤ bot.log.


---



#### üî∏ –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
-- sav_bot1 (—Ñ–∞–∫—Ç—ã)
CREATE TABLE sav_bot1 (
ID INTEGER PRIMARY KEY AUTOINCREMENT,
Date TEXT,          -- YYYY-MM-DD
Groupe TEXT,        -- '–ó–ø', '–ü—Ä–æ–¥—É–∫—Ç—ã' ...
Price REAL,
Description TEXT
);

-- sav_bot_rs (–ø–ª–∞–Ω)
CREATE TABLE sav_bot_rs (
ID INTEGER PRIMARY KEY AUTOINCREMENT,
Groupe TEXT,
Plan REAL
);```

---